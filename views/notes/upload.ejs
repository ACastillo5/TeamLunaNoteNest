<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Upload</title>
  <link rel="stylesheet" href="/public/styles/styles.css">
  <link rel="stylesheet" href="/public/styles/upload.css">
  <link rel="icon" href="/public/images/favicon.ico" type="image/x-icon">
  <script src="/public/accountHead.js" defer></script>
</head>

<body>
  <div id="topbar"></div>
    <main>
      <br><br>
      <div id="successMessage" class="success">
        Notes uploaded successfully!
      </div>
      <h1 class="simple-title">Upload</h1>
      <form action="/upload" method="POST" enctype="multipart/form-data">
        <div class="input-container">
          <p class="input-text">File Upload:</p>
          <div id="topRectangle" class="top-rectangle" onclick="document.getElementById('fileInput').click();">
            Click to Upload
          </div>
          <input type="file" id="fileInput" class="file-input" name="noteFile" />
        </div>
        <!-- <div class="input-container">
          <p class="input-text">Program of Study:</p>
          <input type="text" class="rectangle" placeholder="Enter text here" />
        </div> -->
        <div class="input-container">
          <p class="input-text">Course:</p>
          <input type="text" class="rectangle" placeholder="Enter text here" name="course" style="margin-left: 128px;" />
        </div>
        <div class="input-container">
          <p class="input-text">Professor:</p>
          <input type="text" class="rectangle" placeholder="Enter text here" name="professor" style="margin-left: 100px;" />
        </div>
        <div class="input-container">
          <p class="input-text">Description:</p>
          <input type="text" class="rectangle" placeholder="Enter text here" name="description" style="margin-left: 80px;"/>
        </div>
        <div class="input-container">
          <input type="checkbox" class="check"/>
          <p> I am confirming that this follows the <a href="https://legal.charlotte.edu/policies/up-407" style="text-decoration: underline;">UNCC Code of Academic Integrity </a></p>
        </div>
        <div class="input-container">
          <input type="checkbox" class="check"/>
          <p> I am confirming that this follows the <a href="https://legal.charlotte.edu/policies/up-407" style="text-decoration: underline;">NoteNest Guidelines </a></p>
        </div>
        <div class="input-container">
          <upload-button id="uploadButton">Upload Notes</upload-button>
        </div>
      </form>
      <script>
        document.getElementById('fileInput').addEventListener('change', function () {
          const fileName = this.files[0] ? this.files[0].name : 'Click to Upload';
          document.getElementById('topRectangle').textContent = fileName;
        });

        // Trigger form submission when the upload button is clicked
        document.getElementById('uploadButton').addEventListener('click', function () {
          document.querySelector('form').submit();
        });

        // Check for the success flag in the URL
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('success') === 'true') {
          document.getElementById('successMessage').style.display = 'block';
        }
      </script>
    </main>
  </body>
</html>